<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>hold 'em poker test</title>

  <link rel="stylesheet" href="style.css" />

	<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	
	<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
	<script src="../src/disbranded.poker.js"></script>
	<script src="../src/disbranded.poker.util.events.js"></script>
	<script src="../src/disbranded.poker.deck.js"></script>
  <script src="../src/disbranded.poker.hand.js"></script>
  <script src="../src/disbranded.poker.string.js"></script>
  <script src="../src/disbranded.poker.players.js"></script>
  <script src="../src/disbranded.poker.pot.js"></script>
  <script src="../src/disbranded.poker.game.js"></script>
  <script src="../src/disbranded.poker.holdem.defaults.js"></script>
	<script src="../src/disbranded.poker.holdem.game.js"></script>
  <script>
  jQuery(function ($) {
    var P = DISBRANDED.poker,
        options = {
          id: 'abc'
        },
        game = DISBRANDED.poker.holdem.Game(options)   
         
    // console.log(game.options.id)
    // console.log(game.set('name', 'poker').get('name'))
    // console.log(game._deck)
    // var fnA = function (e) {
    //   console.log('a:', e.type, e.defaultPrevented)
    //   e.stopPropagation()
    //   e.preventDefault()
    // },
    // fnB = function (e) {
    //   console.log('b:', e.type, e.defaultPrevented)
    // }
    // game.on('deal', fnA, game)
    // game.on('deal', fnB, game)
    // game.on('deal', fnB, this)
    // game.trigger('deal')
    // game.off('deal', fnA)
    // game.off('deal', fnB, this)
    // game.trigger('deal')

    


    var $output = $('ul.output'),
        startTime = (new Date).getTime(),
        nowTime = startTime,

        elapsed = function () {
          var t = (new Date).getTime(),
              str = ' : ' + ((t - nowTime) / 1000) + 's'
          nowTime = t
          return str
        },
        
        result,
        getSetResult = function (result) {
          var i, len, str = ''
          if (!result) {
            return 'null'
          }
          for (i = 0, len = result.cards.length; i < len; i++) {
            str += result.cards[i]
            if (i < len - 1) {
              str += ' + '
            }
          }
          str += ' / "' + DISBRANDED.poker.string.en.cards[result.type] + '"'
          return str
        },
        
        hands = []

    $output.append("<li>Hand.isFlush(['KS','4H','5S','9S','TS','5C','2S']) = "
                       + P.Hand.isFlush(['KS','4H','5S','9S','TS','5C','2S']).cards
                       + elapsed() + "</li>")
    //                  
    $output.append("<li>Hand.isFlush(['KS','4H','5S','9H','TS','5C','2S']) = "
                       + P.Hand.isFlush(['KS','4H','5S','9H','TS','5C','2S'])
                       + elapsed() + "</li>")
    //
    $output.append("<li>Hand.isFlush(['KS','JS','9S','7S','5S','KH','JH','9H','7H','4H']) = "
                       + P.Hand.isFlush(['KS','JS','9S','7S','5S','KH','JH','9H','7H','4H']).cards
                       + elapsed() + "</li>")
    //
    $output.append("<li>Hand.isFlush(['KS','4S','5S','9S']) = "
                       + P.Hand.isFlush(['KS','4S','5S','9S'])
                       + elapsed() + "</li>")
    //
    $output.append("<li>Hand.isStraight(['KS','4S','5S','9S','QH','TD','JD']) = "
                       + P.Hand.isStraight(['KS','4S','5S','9S','QH','TD','JD']).cards
                       + elapsed() + "</li>")
    //
    $output.append("<li>Hand.isStraight(['AS','8D','7S','9S','QH','TD','JD']) = "
                       + P.Hand.isStraight(['AS','8D','7S','9S','QH','TD','JD']).cards
                       + elapsed() + "</li>")
    //
    $output.append("<li>Hand.isStraight(['KS','4S','5S','9S','QH','TD','7C']) = "
                       + P.Hand.isStraight(['KS','4S','5S','9S','QH','TD','7C'])
                       + elapsed() + "</li>")
    //
    $output.append("<li>Hand.isStraight(['3H','4D','5C','7S','6H','KS','JH','QD','TC','9H']) = "
                       + P.Hand.isStraight(['3H','4D','5C','7S','6H','KS','JH','QD','TC','9H']).cards
                       + elapsed() + "</li>")
    //
    $output.append("<li>Hand.isStraight(['TC','JC','QC','KC']) = "
                       + P.Hand.isStraight(['TC','JC','QC','KC'])
                       + elapsed() + "</li>")
    //
    result = P.Hand.isStraightFlush(['KS','4S','5S','9S','QH','TD','JD'])
    $output.append("<li>Hand.isStraightFlush(['KS','4S','5S','9S','QH','TD','JD']) = "
                       + (result ? (result.cards + ' / Royal Flush: ' + result.royalFlush) : 'null')
                       + elapsed() + "</li>")
    //  
    result = P.Hand.isStraightFlush(['KD','4S','5S','AD','QD','TD','JD'])
    $output.append("<li>Hand.isStraightFlush(['KD','4S','5S','AD','QD','TD','JD']) = "
                       + result.cards + ' / Royal Flush: ' + result.royalFlush
                       + elapsed() + "</li>")
    //
    result = P.Hand.isStraightFlush(['KD','4S','5S','9D','QD','TD','JD'])
    $output.append("<li>Hand.isStraightFlush(['KD','4S','5S','9D','QD','TD','JD']) = "
                       + result.cards + ' / Royal Flush: ' + result.royalFlush
                       + elapsed() + "</li>")
    //
    result = P.Hand.findSets(['5C','6D','8H','6C','6S','5S','6H'])
    $output.append("<li>Hand.findSets(['5C','6D','8H','6C','6S','5S','6H']) = "
                       + getSetResult(result)
                       + elapsed() + "</li>")
    //
    result = P.Hand.findSets(['5C','6D','8H','6C','QH','5S','6H'])
    $output.append("<li>Hand.findSets(['5C','6D','8H','6C','QH','5S','6H']) = "
                       + getSetResult(result)
                       + elapsed() + "</li>")
    //
    result = P.Hand.findSets(['5C','6D','8H','6C','QH','JS','6H'])
    $output.append("<li>Hand.findSets(['5C','6D','8H','6C','QH','JS','6H']) = "
                       + getSetResult(result)
                       + elapsed() + "</li>")
    //
    result = P.Hand.findSets(['5C','6D','8H','6C','QH','JS','5H'])
    $output.append("<li>Hand.findSets(['5C','6D','8H','6C','QH','JS','5H']) = "
                       + getSetResult(result)
                       + elapsed() + "</li>")
    //
    result = P.Hand.findSets(['5C','6D','8H','6C','QH','JS','9H'])
    $output.append("<li>Hand.findSets(['5C','6D','8H','6C','QH','JS','9H']) = "
                       + getSetResult(result)
                       + elapsed() + "</li>")
    //
    result = P.Hand.findSets(['5C','6D','8H','2C','QH','JS','9H'])
    $output.append("<li>Hand.findSets(['5C','6D','8H','2C','QH','JS','9H']) = "
                       + getSetResult(result)
                       + elapsed() + "</li>")
    //
    $output.append("<li>Hand.sortByRank(['5C','6D','8H','2C','QH','JS','9H']) = "
                       + P.Hand.sortByRank(['5C','6D','8H','2C','QH','JS','9H'])
                       + elapsed() + "</li>")
    //
    $output.append("<li>Hand.sortByRank(['5C','5D','8H','8C','QH','JS','9H']) = "
                       + P.Hand.sortByRank(['5C','5D','8H','8C','QH','JS','9H'])
                       + elapsed() + "</li>")
    //
    $output.append("<li>Hand.sortByRank(['2H','AC','8D']) = "
                       + P.Hand.sortByRank(['2H','AC','8D'])
                       + elapsed() + "</li>")
    //
    $output.append("<li>Hand.sortByRank([]) = "
                       + P.Hand.sortByRank([])
                       + elapsed() + "</li>")
    //
    hands[0] = new P.Hand('a').add('KD','4S','5S','AD','QD','TD','JD')
    $output.append("<li>new Hand('a').add('KD','4S','5S','AD','QD','TD','JD')"
                      + ' = ' + hands[0].high() +' / "'+ DISBRANDED.poker.string.en.cards[hands[0].rank()] +'"'
                      + elapsed() + "</li>")
    //
    hands[1] = new P.Hand('b').add('KD','4S','5S','9D','QD','TD','JD')
    $output.append("<li>new Hand('b').add('KD','4S','5S','9D','QD','TD','JD')"
                      + ' = ' + hands[1].high() +' / "'+ DISBRANDED.poker.string.en.cards[hands[1].rank()] +'"'
                      + elapsed() + "</li>")
    //
    hands[2] = new P.Hand('c').add('KD','4S','5S','AD','QD','TD','JS')
    $output.append("<li>new Hand('c').add('KD','4S','5S','AD','QD','TD','JS')"
                      + ' = ' + hands[2].high() +' / "'+ DISBRANDED.poker.string.en.cards[hands[2].rank()] +'"'
                      + elapsed() + "</li>")
    //
    hands[3] = new P.Hand('d').add('KD','4S','5S','AD','QD','TD','2D')
    $output.append("<li>new Hand('d').add('KD','4S','5S','AD','QD','TD','2D')"
                      + ' = ' + hands[3].high() +' / "'+ DISBRANDED.poker.string.en.cards[hands[3].rank()] +'"'
                      + elapsed() + "</li>")
    //
    hands[4] = new P.Hand('e').add('KD','4S','5S','KH','QD','TD','2D')
    $output.append("<li>new Hand('e').add('KD','4S','5S','KH','QD','TD','2D')"
                      + ' = ' + hands[4].high() +' / "'+ DISBRANDED.poker.string.en.cards[hands[4].rank()] +'"'
                      + elapsed() + "</li>")
    //
    hands[5] = new P.Hand('f').add('KD','4S','5S','KH','QD','4D','2D')
    $output.append("<li>new Hand('f').add('KD','4S','5S','KH','QD','4D','2D')"
                      + ' = ' + hands[5].high() +' / "'+ DISBRANDED.poker.string.en.cards[hands[5].rank()] +'"'
                      + elapsed() + "</li>")
    //
    hands[6] = new P.Hand('g').add('KD','4S','5S','KH','QD','4D','4H')
    $output.append("<li>new Hand('g').add('KD','4S','5S','KH','QD','4D','4H')"
                      + ' = ' + hands[6].high() +' / "'+ DISBRANDED.poker.string.en.cards[hands[6].rank()] +'"'
                      + elapsed() + "</li>")
    //
    hands[7] = new P.Hand('h').add('KD','4S','5S','8H','QD','4D','4H')
    $output.append("<li>new Hand('h').add('KD','4S','5S','8H','QD','4D','4H')"
                      + ' = ' + hands[7].high() +' / "'+ DISBRANDED.poker.string.en.cards[hands[7].rank()] +'"'
                      + elapsed() + "</li>")
    //
    hands[8] = new P.Hand('i').add('KD','4S','5S','8H','QD','9D','JH')
    $output.append("<li>new Hand('i').add('KD','4S','5S','8H','QD','9D','JH')"
                      + ' = ' + hands[8].high() +' / "'+ DISBRANDED.poker.string.en.cards[hands[8].rank()] +'"'
                      + elapsed() + "</li>")
    //
    result = P.Hand.sort(hands.slice(0))
    $output.append("<li>Hand.sort([Hand instances above]) best = "
                      + ' id:"'+ result[0].id +'" '+ result[0].high() +' / "'+ DISBRANDED.poker.string.en.cards[result[0].rank()] +'"'
                      + elapsed() + "</li>")
    //
    result = P.Hand.sort([hands[2], hands[3], hands[7], hands[8]])
    $output.append("<li>Hand.sort(c, d, h, i) best = "
                      + ' id:"'+ result[0].id +'" '+ result[0].high() +' / "'+ DISBRANDED.poker.string.en.cards[result[0].rank()] +'"'
                      + elapsed() + "</li>")
    //
    result = P.Hand.sort([hands[4], hands[5], hands[8]])
    $output.append("<li>Hand.sort(e, f, i) best = "
                      + ' id:"'+ result[0].id +'" '+ result[0].high() +' / "'+ DISBRANDED.poker.string.en.cards[result[0].rank()] +'"'
                      + elapsed() + "</li>")
    //
    $output.append("<li>TOTAL: " + (((new Date).getTime() - startTime) / 1000) + "s</li>")
  })
  </script>
</head>

<body>

  <div class="test">
    <ul class="output"></ul>
  <div>

</body>
</html>