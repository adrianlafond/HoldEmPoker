/*
 * poker-game-engine v0.0.1
 * by Adrian Lafond / adrian [at] disbranded.com
 * last updated 2013-10-04
**/
!function(a,b){"function"==typeof define&&define.amd?define(["underscore"],b):"object"==typeof exports?module.exports=b(require("underscore")):(a.DISBRANDED=a.DISBRANDED||{},a.DISBRANDED.Poker=b(a._))}(this,function(a){"use strict";var b,c,d,e;return e={en:{cards:[null,"High Card","One Pair","Two Pair","Three of a Kind","Straight","Flush","Full House","Four of a Kind","Straight Flush","Royal Flush"]}},function(){var b=["2C","3C","4C","5C","6C","7C","8C","9C","TC","JC","QC","KC","AC","2D","3D","4D","5D","6D","7D","8D","9D","TD","JD","QD","KD","AD","2H","3H","4H","5H","6H","7H","8H","9H","TH","JH","QH","KH","AH","2S","3S","4S","5S","6S","7S","8S","9S","TS","JS","QS","KS","AS"],d=b.length,e=4;c=function(a){this.cardsAll=b.slice(0),this.cardsIn=[],this.cardsOut=[],this.isShuffled=!1,this.isNew=!0,this.jokers=0,"object"==typeof a&&this.addJokers(parseInt(a.hasOwnProperty("jokers")?a.jokers:0,10)),this.reset()},c.prototype={cards:function(){return this.cardsIn.slice(0)},count:function(){return d+this.jokers},removeJokers:function(){return this.cardsAll.slice(0,d),this.jokers=0,this.reset(),this},addJokers:function(b){return b=parseInt(b,10),isNaN(b)||(b=Math.max(0,Math.min(b,e-this.jokers)),a.times(b,function(a){this.cardsAll.push("W"+(a+1))},this),this.jokers+=b,this.reset()),this},reset:function(){return this.cardsIn=this.cardsAll.slice(0),this.cardsOut=[],this.isShuffled=!1,this.isNew=!0,this},shuffle:function(){return this.reset(),this.cardsIn=a.shuffle(this.cardsIn),this.isShuffled=!0,this.isNew=!1,this},deal:function(){var a=null;return this.cardsIn.length>0&&(a=this.cardsIn.pop(),this.cardsOut.push(a),this.isNew=!1),a}}}(),function(){d=function(a){return this instanceof d?(this.id=a,this.reset(),void 0):new d(a)},d.ROYAL_FLUSH=10,d.STRAIGHT_FLUSH=9,d.FOUR_OF_A_KIND=8,d.FULL_HOUSE=7,d.FLUSH=6,d.STRAIGHT=5,d.THREE_OF_A_KIND=4,d.TWO_PAIR=3,d.ONE_PAIR=2,d.HIGH_CARD=1,d.BETTER=-1,d.WORSE=1,d.EVEN=0,d.RANKS="23456789TJQKAW",d.SUITS="CDHS",d.prototype={reset:function(){return this.cards=[],this.rank=0,this.high=null,this.low=null,this},has:function(b){return a.contains(this.cards,b)}}}(),b=function(){this.name="Poker"},b.prototype={},b.Deck=c,b.lingo=function(a){return a=a||"en",e.hasOwnProperty(a)?e[a]:null},b});